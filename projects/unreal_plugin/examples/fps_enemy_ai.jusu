# FPS enemy decision: aim and shoot when line-of-sight
fn hostiles_ai(player_pos, enemy_pos, has_los) {
  if (!has_los) { return {'action': 'search'} }
  # simple hysteresis: close => melee, far => shoot
  dist = sqrt((player_pos.x - enemy_pos.x)*(player_pos.x - enemy_pos.x) + (player_pos.y - enemy_pos.y)*(player_pos.y - enemy_pos.y))
  if (dist < 2) { return {'action': 'melee'} }
  return {'action': 'shoot', 'aim': normalize(player_pos - enemy_pos)}
}
